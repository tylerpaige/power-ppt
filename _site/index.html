<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title></title>
<link rel="stylesheet" type="text/css" href="assets/css/reset.css" />
<link rel="stylesheet" type="text/css" href="assets/css/base.css" />
<link rel="stylesheet" type="text/css" href="assets/css/animations.css" />
<script src="assets/js/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="assets/js/keypress-1.0.9.min.js" type="text/javascript"></script>
<script>
var cur; // temporarily global var for debugging
$(function() {	

	// if you can find out what position (nth child) a selection is, we don't have to worry about saving x and y values
	cur = $('#container').children('.slide').eq(0);
	$(cur).addClass('visible');
	
//  Back-up. This one is working.
//	keypress.combo('right', function() {
//		index = cur.index()-1; //Every slide has a content <div> that we need to ignore (hence, minus 1). Slide 1 will be index()=1, but we want it to be 0
//		if(index < $(cur).siblings('.slide').length){ //Don't need to addBack() because index() starts at 0
//			target = index+1; //Progressing, we want the next slide (i.e. incremented index). If we want to go from 1 to 2, we want the target index to be 2
//			cur = $(cur).siblings('.slide').addBack().eq(target); // so find all the .slide elements in the container (not just the siblings), and get the targeted index. eq() returns the nth element that matches the selection (i.e. all the slide elements in the container).
//			$(cur).addClass('top').siblings().removeClass('top');
//		} else {
//			// do nothing
//			console.log('Currently on the last slide. Nowhere forward to go');
//		}
//	});

    var hidePrev = function(transition){
        $(cur).siblings('.'+transition).removeClass(transition);
    };
    
    keypress.combo('right', function() {
    	index = cur.index()-1;
    	if(index < $(cur).siblings('.slide').length){
    		target = index+1; 
    		cur = $(cur).siblings('.slide').addBack().eq(target);
        	$(cur).addClass('slideLeft'); 
        	$(cur).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(){
        	    $(this).addClass('visible').removeClass('slideLeft').siblings('.visible').removeClass('visible');
        	});
        }
    });
    keypress.combo('left', function() {
        index = cur.index()-1;
        if(index > 0){
            target = index-1;
            cur = $(cur).siblings('.slide').addBack().eq(target);
            $(cur).addClass('slideRight');
            $(cur).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(){
                $(this).addClass('visible').removeClass('slideRight').siblings('.visible').removeClass('visible');
            });
        }
    });
    keypress.combo('down', function() {
        if($(cur).children('.slide').length > 0){
            cur = $(cur).children('.slide').eq(0);
            $(cur).addClass('slideUp');
            $(cur).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(){
                $(this).addClass('visible').removeClass('slideUp').parent('.visible').removeClass('visible');
            });
        }
    });
    keypress.combo('up', function() {
        if($(cur).parent().hasClass('slide')){ // only ascend if the target is a slide, not the container
            cur = $(cur).parent('.slide');
            console.log('supposed parent', $(cur));
            $(cur).addClass('slideDown');
            $(cur).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(){
                $(this).addClass('visible').removeClass('slideDown').children('.visible').removeClass('visible');
            });
        }
    });




//
//	keypress.combo('left', function() {
//		index = cur.index()-1; //Again, ignore the content <div>. Slide 2 should be index=1
//		target = index-1; //And the targeted element should be index=0
//		if(index < 1){ //if index=0 (i.e. Slide #1)
//			// do nothing
//			console.log('Currently on the first slide. Nowhere back to go');
//		} else {
//			cur = $(cur).siblings('.slide').addBack().eq(target); //Again, get all the .slide elements in the container, and return the targeted indexed element
//			$(cur).addClass('top').siblings().removeClass('top');
//		}
//	});
//	keypress.combo('down', function() {
//		// at this stage, we don't care about the index. We only care about the first child .slide
//		if($(cur).children('.slide').length > 0){
//    		$(cur).removeClass('top');
//    		cur = $(cur).children('.slide').eq(0);
//    		$(cur).addClass('top');
//    	} else {
//    	    console.log('do nothing');
//    	}
//	});
//	keypress.combo('up', function() {
//	    if($(cur).parent().hasClass('slide')){ // only ascend if the target is a slide, not the container
//	        $(cur).removeClass('top');
//	        cur = $(cur).parent('.slide');
//	        $(cur).addClass('top');
//	    } else {
//	        console.log('do nothing');
//    	}
//	});
});
</script>	
</head>
<body>
<div id="container">
	<div class="directions">Use the arrow keys to control the Powerpoint</div>
	<div class="slide origin">
		<div class="content">Slide #1</div>
		<div class="slide">
			<div class="content">Tangent of Slide #1</div>
			<div class="slide"> 
				<div class="content">Tangent of Tangent of Slide #1</div>
			</div>
		</div>
		<div class="slide origin">
			<div class="content">Progressing the Tangent of Slide #1</div>
		</div>
		<div class="slide">
			<div class="content">Second progression of the Tangent of Slide #1</div>
		</div>
	</div>
	<div class="slide two">
		<div class="content">Slide #2</div>
	</div>
	<div class="slide">
		<div class="content">Slide #3</div>
	</div>
	<div class="slide">
		<div class="content">Slide #4</div>
	</div>
</div>
</body>
</html>


